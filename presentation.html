<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R Shiny</title>
    <meta charset="utf-8" />
    <meta name="author" content="Camille Bonamy" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R Shiny
## Un package de l’écosytème du langage R
### Camille Bonamy
### Next Decision
### 2020/10/10 (updated: 2020-10-15)

---


class: inverse, center, middle

# Présentation

---

### Historique

Shiny est un package R open [source](https://github.com/rstudio/shiny) sous licence GPL3 (liberté d'utiliser gratuitement, étudier, partager, et modifier le logiciel) publié en 2012 (pour la version `0.1.2`).

Cet outil est le fruit de plusieurs auteurs : Winston Chang [aut, cre], Joe Cheng [aut], JJ Allaire [aut], Yihui Xie [aut], Jonathan McPherson [aut] et d'un certain nombre d'autres contributeurs ([liste complète](https://cran.r-project.org/web/packages/shiny/index.html)).

--

### Description

D'un point de vue **fonctionnel** : shiny permet de créer des applications Web.
En **pratique**, cet outil génère et interprète du contenu web (HTML, CSS et JS)

---

### Utilisation

Les applications crées s'interfacent avec :

  * l'ensemble des autres packages R pour
  
    * se connecter à des bases de données (via DBI, odbc, ...)
    
    * générer des visualisations (graphes, cartes, ...)
    
    * exécuter des traitements statistiques ou des algorithmes de Machine Learning
    
    * des scripts Python (via le package `reticulate`), des API ...
    
  * d'autres contenus web (CSS, JS, API)

---

class: inverse, center, middle

# Cas d'usages

---

### Suivi des status de maintenance

**Besoin** : les machines d'une chaîne de production sont programmées pour s'arrêter au bout d'un certain nombre d'utilisations pour effectuer une maintenance. 

Les commandes variées font que les machines utilisées sont rarement les mêmes entraînant des arrêts non anticipé de la chaîne.

**Livrable** : une application shiny (basée sur une librairie JS) avec un calendrier interactif de l'utilisation des équipements et des maintenances.

--

### Traitement du signal

**Besoin** : le pôle R&amp;D a besoin d'un outil de suivi des experimentations permettant de filtrer le bruit dans les signaux.

**Livrable** : un applicatif permet de sélectionner les experimentations et d'afficher le signal filtré (par d'autre fonctionnalitées sous R).

---
 
### Recherche de niches commerciales

**Besoin** : l'outil Excel utilisé par le marketing ne permet plus d'analyser et de visualiser les données.

**Livrable** : une application pour filtrer par produits, concurents, lieux et afficher les dimensions pertinentes ou les secteurs pertinents.

--

### Etude et recommendation de prix

**Besoin** : les commerciaux connaissent leur marché en terme de produit et de secteur géographique. Il n'y a cependant pas d'outil centralisant les prix pratiqués à l'échelle mondiale.

**Livrable** : consolidation des données (à partir d'Excel et de Sharepoint), app permettant de filtrer les données. Pour la réponse à un appel d'offre : affichage de l'historique et recommendation de prix (modèle entraîné sous R). 

---

class: inverse, center, middle

# Les bénéfices de l'open source

---

### Customiser ses apps avec les autres ressources web

Il est également possible d'utiliser directement des scripts ou functions JS et de customiser son app avec du CSS (l'UI par défaut est basé sur le thème Bootstrap).

--

### Exemples

Un grand nombre d'exemples sont disponibles en : https://shiny.rstudio.com/gallery/. Il existe plusieurs type d'applications :

  * [dashboard](https://gallery.shinyapps.io/nz-trade-dash/)
  
  * [flexboard](https://beta.rstudioconnect.com/jjallaire/htmlwidgets-ggplotly-geoms/htmlwidgets-ggplotly-geoms.html#geom_point)
  
  * carte interactive
  
  * rapport interactif (cf demoshinymd.Rmd)

  * plus d'exemples avec le [shiny contest](https://blog.rstudio.com/2020/07/13/winners-of-the-2nd-shiny-contest/)

---

### Comment créer une application Shiny

Plusieurs packages extendent **Shiny** et facilitent la création et la mise en production d'applications :
  
  * les thèmes : shinydashboard, ...
    
  * les outils pour organiser le code : package [golem](https://thinkr-open.github.io/golem/), Gitlab (version et dockerisation en CI/CD)

Concernant les modes de déploiements, plusieurs options sont possibles selon les choix d'architecture :
  
  * **Cloud** avec shinyapps.io
    
  * **Cloud ou local** avec docker + server avec proxy, shiny server, ou/et un autre fournisseur
    
  * **Local** avec R (et `renv`), Docker ou Electron
  
---

class: inverse, center, middle

# Coûts

---

### Combien ça coûte R Shiny ?

  * création ou évolution : les jours de developpements
  
  * maintenance : coût d'un server ou d'un service cloud
  
  * licence : 0
  
  
### Les produits pro de RStudio

RStudio [PBC](https://blog.rstudio.com/2020/01/29/rstudio-pbc/) (Public Benefit Corporation) est une entreprise qui créé des ressources libres (54% de la force des ingénieurs logiciels à temps plein) et fournit également des services payants : `RStudio Professional IDE`, `RStudio Connect` et `RStudio Package Manager.

Ces services sont disponible selon 2 options

  * A l'unité : https://rstudio.com/pricing/
  
  * L'ensemble : https://rstudio.com/pricing/team/
  
---

class: inverse, center, middle

# Ce qu'il faut retenir

---

Shiny complète la gamme de livrable réalisable avec R :

* création ou alimentation de bases de données (ou de fichiers plats)

* rapport ou étude ( statique : pdf, excel, ppt ; dynamique : html paramétrable avec envoi par email )

* **applications web** et **rapport dynamique**

* API (pour exécuter un traitement R, requêter un modèle, ...)


Les applications créées sont déployables selon plusieurs modes (local, cloud) tels que des développements s'appuiyant sur des technologies open source (docker, shiny proxy, ...) ou des solutions payantes (RStudio Connect, services hébergés).

---

class: inverse, center, middle

# Merci ! Q &amp; R

Présentation créée avec le package R [**xaringan**](https://github.com/yihui/xaringan)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
(function(time) {
  var d2 = function(number) {
    return ('0' + number).slice(-2); // left-pad 0 to minutes/seconds
  },

  time_format = function(total) {
    var secs = Math.abs(total) / 1000;
    var h = Math.floor(secs / 3600);
    var m = Math.floor(secs % 3600 / 60);
    var s = Math.round(secs % 60);
    var res = d2(m) + ':' + d2(s);
    if (h > 0) res = h + ':' + res;
    return res;  // [hh:]mm:ss
  },

  slide_number_div = function(i) {
    return document.getElementsByClassName('remark-slide-number').item(i);
  },

  current_page_number = function(i) {
    return slide_number_div(i).firstChild.textContent;  // text "i / N"
  };

  var timer = document.createElement('span'); timer.id = 'slide-time-left';
  var time_left = time, k = slideshow.getCurrentSlideIndex(),
      last_page_number = current_page_number(k);

  setInterval(function() {
    time_left = time_left - 1000;
    timer.innerHTML = ' ' + time_format(time_left);
    if (time_left < 0) timer.style.color = 'red';
  }, 1000);

  slide_number_div(k).appendChild(timer);

  slideshow.on('showSlide', function(slide) {
    var i = slide.getSlideIndex(), n = current_page_number(i);
    // reset timer when a new slide is shown and the page number is changed
    if (last_page_number !== n) {
      time_left = time; last_page_number = n;
      timer.innerHTML = ' ' + time_format(time); timer.style.color = null;
    }
    slide_number_div(i).appendChild(timer);
  });
})(60000);
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
